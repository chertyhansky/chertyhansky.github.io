+++
author = "Akaky Chertyhansky"
title = 'Как избавиться от мышей'
date = 2024-10-29T21:12:48+05:00
description = ""
draft = true
tags = [
    "notag",
]
categories = [
    "nocategory",
]
+++

## Преамбула

Здрассьте.

Так уж сложилось, что не люблю я девайс под названием «мышь».
Нет, оно годится чтобы чертить чертёжики, подправить фотографию в гимпе, и т.п..
Но вот для управления интерфейсом — это чистой воды маразм.
Пример — тот же браузер.  Как это работает у большинства юзеров: тыкнул мышкой иконку браузера, тыкнул в адресную строку, схватился за клавиатуру, набрал адрес поисковика, схватил мышь, тыкнул в строку поиска, схватил клавиатуру, набрал запрос, опять мышь, чтобы тыкнуть в ссылку.
И вот так постоянно. Плюс, мышь требует координации. Нельзя неглядя ткнуть мышью кнопку.
Курсор мыши надо сначала «поймать» глазами, потом навести и ткнуть. Тогда как хоткей нажимается мнговенно (ну, почти).
В итоге имеем тот факт, что 50% полезного времени уходит на хватание мыши и поиск курсора, хватание клавиатуры и поиск буковок, и так по кругу.
Вроде как в *nix изначально изначально мышь позиционировалась как устройство выделения/копирования/вставки, но в какой-то момент они свернули не туда, и теперь мы имеем gnome, kde и прочее, где без мыши не сделать почти ничего.
В некоторых программах, например, даже в меню ни попасть никак, кроме как мышью.
Уже лет эдак 15 я с этим делом пытаюсь бороться с переменным успехом.
Наверное, ничего нового я здесь не открою, но постараюсь собрать в одном месте всё, чем пользуюсь.
Это пока что будет вроде как вводная обзорная статейка, позже пройдусь по более конкретным вещам.
Для начала разберёмся...

## А как оно надо?

Очевидно, надо для задач управления оставить **одно** устройство.
Не менее очевидно, что это будет **клавиатура**.
Для тех, кто ещё не согласен - попробуйте потыкать в сенсорную магнитолу, находясь за рулём.
Это надо отвлекаться от дороги и смотреть в экран - сенсорные кнопки наощупь не потыкаешь, как и экранные кнопки мышью.
Кстати, как раз поэтому как минимум громкость, как самую часто тыкаемую, на них делают аппаратными кнопками или крутилкой.

Итак, возвращаясь к исходной теме...

### Начнём с display manager

Он же login manager, он же *"менеджер входа в систему"* (ох уж этот транслейтинг междумордия).
Я уж не знаю что там сейчас в моде, но судя по скриншотам, которые встречаются в этих ваших интернетах, что-то навороченное, которое показывает картинки с пользователями, в которые надо тыкать мышью или неочевидным образом перебирать табом и курсором, выбирать запускаемый WM, и прочие излишества...

**Фтопку!**
Нам нужен [slim](https://github.com/iwamatsu/slim). В репозиториях всех дистрибутивов он обычно есть.
На экране только поля ввода *"user"* и *"password"*.
После ввода пароля запускается то, что прописано в `~/.xinitrc`. Всё!
Все настройки в файле `/etc/slim.conf`.
Из полезного - можно поменять оформление, параметры `default_user` и `focus_password` на случай если юзер всего один - останется ввести только пароль.
Можно даже настроить автологин и не вводить ничего.
В комплекте есть ещё slimlock - утилитка для блокировки экрана.
Выглядит как тот же slim, просит пароль от текущего юзера.
Можно навесить на хоткей и нажимать по необходимости.
Полезно, если по клавиатуре могут ходить дети, коты, собаки (ну или если жена любит читать переписки).

### Дальше видим WM

Он же window manager.
Не знаю что там сейчас в моде, подозреваю, что gnome/kde/xfce.
В котором, чтобы что-то запустить, надо проделать все вышеописанные манипуляции с мышью и менюшками.
Не сомневаюсь, что и в них есть какая-то поддержка хоткеев, но поскольку это всё ориентированно на юзера обыкновенного, то *ффтопку*!

Я, например, вижу notion, который раньше был ion3.
Перепробовал большую часть тайловых, но ничего лучше не нашёл.
Сижу на нём уже лет 13-15 и никуда не собираюсь.
Про него было написано много (про ion3 в основном, но это всё применимо и к notion).
Сейчас это всё, к сожалению, частично кануло в небытие, поэтому, возможно, статью по конфигурянию его как-нибудь тоже изображу на досуге.
Ещё есть awesome, i3wm, wmii, dwm, ratpoison, xmonad и куча других, которыми я либо пользовался мало, либо не пользовался совсем.
У notion есть несколько плюсов, которых я не нашёл у других wm.
В первую очередь, это статический тайлинг с возможностью настроить привязку приложений к своим заранее созданным фреймам. Конфигурация фреймов сохраняется.
Скрэтчпады (это всплывающий по хоткею фрейм) и иерархическая структура. Например, внутри скрэтчпада можно создать несколько фреймов и разместить их как угодно.
Теоретически можно даже создать отдельный workspace внутри скрэтчпада и разместить в нём ещё один скрэтчпад или парочку плавающих окон.
Не знаю зачем такое может понадобиться, но можно.

Поведение самих окон тоже настраивается. Какие-то можно сделать плавающими.
Например, я плавающими делаю диалоговые окна, потому что по дефолту для них включен transient mode, при этом они растягиваются на всю ширину окна, а при высоком разрешении это не очень удобно.
Ну и плюс, размеры и расположение плавающих окон он тоже умеет запоминать, что удобно.
А ещё notion нормально работает с двумя мониторами.
Ну т.е. так, как надо **мне** - на каждый монитор можно переключиться своим хоткеем, и на каждом можно создать свою конфигурацию фреймов и десктопов.
Возможно всё перечисленное умеет ещё и xmonad, но я его не особо ковырял, ибо лень, да и зачем, когда уже незачем?

Для примера, у меня при старте запускаются whatsapp и telegram, которые автоматом раскладываются по скрэтчпадам и показываются/прячутся по хоткею.
Можно создать конфигурацию фреймов и привязать к ним какое-то многооконное приложение. Было когда-то актуально для gimp, у которого было 3 окна, сейчас не припомню.
Да и в целом любое окно можно привязать к десктопу, фрейму, скрэтчпаду, и оно всегда будет открываться там.

### Приложения

Правильно настроенный zsh (можно и bash, но у меня исторически сложился zsh) заменяет файловый манагер.
Ну ладно, mc тоже есть, иногда пользуюсь.
В основном когда надо видеть две панели и туда-сюда между ними что-то копировать/перемещать.
В качестве терминала - urxvtd+urxvtc.
Потому что их может быть открыто десятка два, а демон и клиенты как-то поэкономнее жрут ресурсы.
Естественно, vim, куда ж без него.
Полезная утилитка copyq - история буфера обмена.
Браузер - qutebrowser. Относительно лёгкий, полностью управляется с клавиатуры. Немного не хватает в нём блокировки рекламы, в остальном жить можно.
В последнее время перешёл на chromium+vimium-c. Возможно, временно.
Про firefox скромно промолчу, хотя там этот плагин тоже был. Но ждать минуту пока оно запустится и ещё столько же, пока прогрузит десяток последних открытых вкладок, наблюдая при этом, как столбик использования памяти в conky уверенно переваливает за 8 GB — это для ценителей.
Есть ещё uzbl, vimb, luakit, но у этих мне чего-то не хватало, уже не помню чего именно.
Всё это унаследовало идею плагина vimperator, но со своими особенностями и разной степенью настраиваемости.

Ещё из используемого - zathura (смотрелка ps/pdf/djvu), mutt (почта), mpd+ncmpcpp (музыка), mpv (видео), imv (картинки) и ещё что-то, с ходу не помню.
Общий принцип - *чем больше интерфейса, тем больше не надо*.
В идеале это commandline или curses.
По той простой причине, что там изначально заложено управление клавиатурой и не надо ничего изобретать.
В основном всё перечисленное - inspired by vim, т.е. hjkl вместо курсора и вот это вот всё.
Соответственно, по запросу *vim-like* можно нагуглить много чего ещё.
Конечно, приходится иметь дело и с традиционными gui, где приходится тыкать мышью, но по большей части это те, где мышь нужна и для работы с самим приложением - чертежи в qcad, фото в gimp, видео в shotcut, музыку в ardour, и т.п.. Tuxguitar, к слову, я почти облепил своими хоткеями, поэтому с ним можно обращаться одной клавиатурой.

Ну а в тех случаях, когда таки нужно тыкнуть мышью в злосчастную кнопку, до которой не добраться тыкая `Tab`, или ссылку в chromium, для которой vimium не отрисовывает hint... Спасает trackpoint (храни будда инженеров IBM, которые его придумали, и китайцев, которые до сих пор делают ThinkPad. Алюминь!). Раньше спасал keynav, вполне можно жить, если приноровиться.

### Менюшки и хоткеи

Так, а как же это всё запускать, если нет ни менюшек, ни значков?
Ну, во первых - хоткеи.
На клавиатурах сейчас бывает тьма дополнительных кнопок, на которые можно навесить всё, что душе угодно.
Плюс, хоткеи вида <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>G</kbd>.
Можно было бы использовать <kbd>Meta</kbd> (это обычно кнопка с кривым окошком), но в notion все сочетания <kbd>Meta</kbd>+<kbd>буква</kbd> уже заняты. <kbd>Alt</kbd>+<kbd>буква</kbd> используются для доступа к меню приложений.

А ещё в notion есть *mod_menu*, у меня оно назначено на <kbd>Alt</kbd>+<kbd>Space</kbd>.
Он умеет делать менюшки, которые работают как строка ввода с автодополнением. Можно делать их иерархическими.
Для приложений у меня обычно одно-двух-буквенные сокращения.
Например, чтобы запустить chromium, надо нажать <kbd>Alt</kbd>+<kbd>Space</kbd>, ввести `ch`, нажать <kbd>Enter</kbd>.
Чтобы смонтировать флешку, воткнутую во второй USB-порт - <kbd>Alt</kbd>+<kbd>Space</kbd>, ввести `m/2`, <kbd>Enter</kbd>.
Об успешном монтировании (или не успешном) выводится сообщение в статусбаре.
Размонтировать - <kbd>Alt</kbd>+<kbd>Space</kbd>, `u/2`, <kbd>Enter</kbd>.
(Да, флешки я монтирую вручную, ибо тут вам не винды, и это вам не это. Если я воткнул флешку - это ещё не значит, что я её собираюсь смотнировать.)

Ну и в довершение всего, запилил себе раскладку клавиатуры с активным использованием level3, в качестве которого назначен <key>AltGr</key>. Там есть и <key>h</key><key>j</key><key>k</key><key>l</key> вместо курсора, и <key>u</key><key>d</key> вместо <key>PgUp</key><key>PgDn</key>, и <key>i</key><key>o</key> вместо <key>Home</key><key>End</key>, и т.д. 

![Скриншот](/images/2024.10.29-23:17:04.png)

Здесь виднеется раскладка клавиатуры в vim, ncmpcpp и conky, просто для красоты.

Засим на сегодня откланиваюсь.
